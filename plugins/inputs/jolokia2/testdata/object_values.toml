config = '''
  [[inputs.jolokia2]]
    default_field_separator = "_"

    [[inputs.jolokia2.metric]]
      name     = "object_without_attribute"
      mbean    = "object_without_attribute:foo=bar"
      tag_keys = ["foo"]

    [[inputs.jolokia2.metric]]
      name     = "object_with_attribute"
      mbean    = "object_with_attribute:foo=bar"
      paths    = ["biz"]
      tag_keys = ["foo"]

    [[inputs.jolokia2.metric]]
      name     = "object_with_attribute_and_path"
      mbean    = "object_with_attribute_and_path:foo=bar"
      paths    = ["biz/baz"]
      tag_keys = ["foo"]

    [[inputs.jolokia2.metric]]
      name     = "object_with_pattern"
      mbean    = "object_with_pattern:test=*"
      tag_keys = ["test"]

    [[inputs.jolokia2.metric]]
      name  = "object_with_attribute_sharing_an_mbean_name1"
      mbean = "object_with_attribute_sharing_an_mbean_name"
      paths = ["foo"]

    [[inputs.jolokia2.metric]]
      name  = "object_with_attribute_sharing_an_mbean_name2"
      mbean = "object_with_attribute_sharing_an_mbean_name"
      paths = ["bar"]

    [[inputs.jolokia2.metric]]
      name  = "object_with_attribute_and_path_sharing_an_mbean_name1"
      mbean = "object_with_attribute_and_path_sharing_an_mbean_name"
      paths = ["foo/fiz"]

    [[inputs.jolokia2.metric]]
      name  = "object_with_attribute_and_path_sharing_an_mbean_name2"
      mbean = "object_with_attribute_and_path_sharing_an_mbean_name"
      paths = ["bar/biz"]
'''

response = '''
  [{
    "request": {
      "mbean": "object_without_attribute:foo=bar",
      "type": "read"
    },
    "value": {
      "biz": 123,
      "baz": 456
  },
    "status": 200
  }, {
    "request": {
      "mbean": "object_with_attribute:foo=bar",
      "attribute": "biz",
      "type": "read"
    },
    "value": {
      "fiz": 123,
      "faz": 456
    },
    "status": 200
  }, {
    "request": {
      "mbean": "object_with_attribute_and_path:foo=bar",
      "attribute": "biz",
      "path": "baz",
      "type": "read"
    },
    "value": {
      "bing": 123,
      "bang": 456
    },
    "status": 200
  }, {
    "request": {
      "mbean": "object_with_pattern:test=*",
      "type": "read"
    },
    "value": {
      "object_with_pattern:test=foo": {
        "fiz": 123
      },
      "object_with_pattern:test=bar": {
        "biz": 456
      }
    },
    "status": 200
  }, {
    "request": {
      "mbean": "object_with_attribute_sharing_an_mbean_name",
      "attribute": "foo",
      "type": "read"
    },
    "value": {
      "bing": 123
  },
    "status": 200
  }, {
    "request": {
      "mbean": "object_with_attribute_sharing_an_mbean_name",
      "attribute": "bar",
      "type": "read"
    },
    "value": {
      "fang": 456
    },
    "status": 200
  }, {
    "request": {
      "mbean": "object_with_attribute_and_path_sharing_an_mbean_name",
      "attribute": "foo",
      "path": "fiz",
      "type": "read"
    },
    "value": {
      "bing": 123
    },
    "status": 200
  }, {
    "request": {
      "mbean": "object_with_attribute_and_path_sharing_an_mbean_name",
      "attribute": "bar",
      "path": "biz",
      "type": "read"
    },
    "value": {
      "fang": 456
    },
    "status": 200
  }]
'''

[[expects]]
  measurement = "object_without_attribute"

  [expects.tags]
    foo = "bar"

  [expects.fields]
    biz = 123.0
    baz = 456.0

[[expects]]
  measurement = "object_with_attribute"

  [expects.tags]
   foo = "bar"

  [expects.fields]
    biz_fiz = 123.0
    biz_faz = 456.0

[[expects]]
  measurement = "object_with_attribute_and_path"

  [expects.tags]
    foo = "bar"

  [expects.fields]
    biz_baz_bing = 123.0
    biz_baz_bang = 456.0

[[expects]]
  measurement = "object_with_pattern"

  [expects.tags]
    test = "foo"

  [expects.fields]
    fiz = 123.0

[[expects]]
  measurement = "object_with_pattern"

  [expects.tags]
    test = "bar"

  [expects.fields]
    biz = 456.0

[[expects]]
  measurement = "object_with_attribute_sharing_an_mbean_name1"

  [expects.tags]

  [expects.fields]
    foo_bing = 123.0

[[expects]]
  measurement = "object_with_attribute_sharing_an_mbean_name2"

  [expects.tags]

  [expects.fields]
    bar_fang = 456.0

[[expects]]
  measurement = "object_with_attribute_and_path_sharing_an_mbean_name1"

  [expects.tags]

  [expects.fields]
    foo_fiz_bing = 123.0

[[expects]]
  measurement = "object_with_attribute_and_path_sharing_an_mbean_name2"

  [expects.tags]

  [expects.fields]
    bar_biz_fang = 456.0
