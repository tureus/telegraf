config = '''
  [[inputs.jolokia2]]
    [[inputs.jolokia2.metric]]
      name     = "compact_metric"
      mbean    = "scalar_value:flavor=chocolate"
      tag_keys = ["flavor"]

    [[inputs.jolokia2.metric]]
      name  = "compact_metric"
      mbean = "scalar_value:flavor=vanilla"
      tag_keys = ["flavor"]

    [[inputs.jolokia2.metric]]
      name  = "compact_metric"
      mbean = "object_value1:flavor=chocolate"
      tag_keys = ["flavor"]

    [[inputs.jolokia2.metric]]
      name  = "compact_metric"
      mbean = "object_value2:flavor=chocolate"
      tag_keys = ["flavor"]
'''

response = '''
  [{
    "request": {
      "mbean": "scalar_value:flavor=chocolate",
      "type": "read"
    },
    "value": 123,
    "status": 200
  }, {
    "request": {
      "mbean": "scalar_value:flavor=vanilla",
      "type": "read"
    },
    "value": 999,
    "status": 200
  }, {
    "request": {
      "mbean": "object_value1:flavor=chocolate",
      "type": "read"
    },
    "value": {
      "foo": 456
    },
    "status": 200
  }, {
    "request": {
      "mbean": "object_value2:flavor=chocolate",
      "type": "read"
    },
    "value": {
      "bar": 789
    },
    "status": 200
  }]
'''

[[expects]]
  measurement = "compact_metric"

  [expects.tags]
    flavor = "chocolate"

  [expects.fields]
    value = 123.0
    foo   = 456.0
    bar   = 789.0

[[expects]]
  measurement = "compact_metric"

  [expects.tags]
    flavor = "vanilla"

  [expects.fields]
    value = 999.0
